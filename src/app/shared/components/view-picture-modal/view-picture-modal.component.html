<ng-container *ngIf="pic">

  <div class="
    flex flex-col gap-4 pt-4 my-[3.5rem]
    md:flex-row-reverse md:gap-2 md:h-picture-modal-content-width md:mt-[3.5rem] md:mb-0
  ">

    <div class="h-max md:w-2/5 lg:w-3/8 xl:w-1/4 md:sticky md:top-[4.5rem] ">

      <!--  Account  -->
      <div class="flex mx-3 flex-col rounded-xl bg-surface-300 text-dark md:ml-0 md:mr-3">

        <a
          class="flex px-4 py-3"
          routerLink="/account/{{pic.account.id}}"
        >

          <div class="gap-2 justify-center items-center w-max flex flex-row" >
            <img class="w-8 max-h-8 object-fill rounded-3xl" src="{{pic.account.profilePicUrl | urlTransform}}" alt="{{pic.account.nickname}}">
            <div class="text-lg font-bolder">{{pic.account.nickname}}</div>
          </div>

          <div class="flex grow justify-end items-center">
            <span class="icon-vector-1"></span>
          </div>
        </a>

        <ng-container *ngIf="!isMobile">
          <div class="px-4 pb-3 text-opacity-60">
            {{pic.description}}
          </div>
        </ng-container>

      </div>

      <ng-container *ngIf="!isMobile" [ngTemplateOutlet]="pictureData" />

    </div>

<!--    todo: fix image + controls height in large screens -->
    <!--  Content  -->
    <div class="w-full flex flex-col gap-2.5 pb-3 text-dark md:h-picture-modal-content-width">

      <!--  Image  -->
      <div class="w-full md:flex-grow px-3 md:px-0 md:pl-3">
        <img
          alt="{{pic.name}}"
          class="m-auto w-full lg:w-auto h-full object-contain rounded-lg"
          src="{{pic.url | urlTransform}}">
      </div>

      <!--  Controls  -->
      <div class="flex flex-col px-6 md:px-4 md:pb-3 lg:pb-0">
        <div class="flex gap-3 text-2xl md:flex-row-reverse">
          <span class="icon-heart--empty"></span>
          <span class="icon-share"></span>
          <div class="grow flex justify-end md:justify-start">
            <span class="icon-setting"></span>
          </div>
        </div>
      </div>

      <ng-container *ngIf="isMobile" [ngTemplateOutlet]="pictureData" />

    </div>

  </div>

  <ng-template #pictureData>

    <!--  Tags  -->
    <div class="flex flex-row gap-2.5 px-7 md:px-0 md:pt-4 flex-wrap" *ngIf="pic.tags.length">
        <span
          *ngFor="let tag of pic.tags"
          class="text-md font-dark font-light bg-primary-900 text-white flex-wrap rounded-lg px-2.5 py-1"
        >
          #{{tag}}
        </span>
    </div>

    <!--  Description  -->
    <div class="flex flex-col px-7 rounded-lg" *ngIf="pic.description && isMobile">
      {{pic.description}}
    </div>

    <!--  Comments  -->
    <div class="px-3 md:pl-0 md:mt-4" *ngIf="pic.comments.length">
      <div class="flex flex-col gap-2.5 bg-surface-300 md:bg-surface-100 py-3 px-4 md:p-0 rounded-lg">

        <p class="text-dark font-bold" *ngIf="isMobile">Comments</p>

        <div class="flex flex-col gap-1.5 rounded-lg md:bg-surface-300 md:p-3" *ngFor="let comm of pic.comments">
          <pp-account-inline-link [pic]="pic" />
          <div class="flex flex-wrap">
            <p>{{comm.text}}</p>
          </div>
        </div>

      </div>

    </div>

  </ng-template>

</ng-container>


