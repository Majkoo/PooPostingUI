<div class="m-4">

  <form #form="ngForm" (ngSubmit)="onSubmit()">
    <h2 class="text-2xl font-bolder text-center mb-6">
      Sign Up
    </h2>

    <div class="mb-3">
      <input
        type="text"
        class="input"
        placeholder="Username"
        name="nickname"
        #name="ngModel"
        [(ngModel)]="createAccountDto.nickname"
        [ngClass]="name.errors && name.touched && name.dirty ? 'border-warning' : 'border-grey'"
        required
        minlength="4"
        maxlength="16"
      >
      <div
        class="text-warning opacity-75 px-2 mt-1 text-sm"
        [@errorAnimation]="name.touched && name.dirty ? 'visible' : 'hidden'"
      >

        <div
          [@errorAnimation]="name.errors && name.errors['required'] ? 'visible' : 'hidden'"
        >
          <span>Username is required</span>
        </div>

        <div
          [@errorAnimation]="name.errors && name.errors['minlength'] ? 'visible' : 'hidden'"
        >
          <span>Minimum username length is 4 characters</span>
        </div>

        <div
          [@errorAnimation]="name.errors && name.errors['maxlength'] ? 'visible' : 'hidden'"
        >
          <span>Maximum username length is 16 characters</span>
        </div>

      </div>
    </div>

    <div class="mb-3">
      <input
        type="email"
        class="input"
        placeholder="Email"
        name="email"
        #email="ngModel"
        [(ngModel)]="createAccountDto.email"
        [ngClass]="email.errors && email.touched && email.dirty ? 'border-warning' : 'border-grey'"
        required
        email
        maxlength="128"
      >
      <div
        class="text-warning opacity-75 px-2 mt-1 text-sm"
        [@errorAnimation]="email.touched && email.dirty ? 'visible' : 'hidden'"
      >

        <div
          [@errorAnimation]="email.errors && email.errors['required'] ? 'visible' : 'hidden'"
        >
          <span>Email is required</span>
        </div>

        <div
          [@errorAnimation]="email.errors && email.errors['email'] ? 'visible' : 'hidden'"
        >
          <span>Please provide a valid email</span>
        </div>

        <div
          [@errorAnimation]="email.errors && email.errors['maxlength'] ? 'visible' : 'hidden'"
        >
          <span>Maximum email length is 128 characters</span>
        </div>

      </div>
    </div>

    <div class="mb-3">
      <input
        type="password"
        class="input"
        placeholder="Password"
        name="password"
        #password="ngModel"
        [(ngModel)]="createAccountDto.password"
        [ngClass]="password.errors && password.touched && password.dirty ? 'border-warning' : 'border-grey'"
        required
        minlength="8"
        maxlength="128"
      >
      <div
        class="text-warning opacity-75 px-2 mt-1 text-sm"
        [@errorAnimation]="password.touched && password.dirty ? 'visible' : 'hidden'"
      >

        <div
          [@errorAnimation]="password.errors && password.errors['required'] ? 'visible' : 'hidden'"
        >
          <span>Password is required</span>
        </div>

        <div
          [@errorAnimation]="password.errors && password.errors['minlength'] ? 'visible' : 'hidden'"
        >
          <span>Minimum password length is 8 characters</span>
        </div>

        <div
          [@errorAnimation]="password.errors && password.errors['maxlength'] ? 'visible' : 'hidden'"
        >
          <span>Maximum password length is 128 characters</span>
        </div>

      </div>
    </div>

    <div class="mb-3">
      <input
        type="password"
        class="input"
        placeholder="Repeat password"
        name="confirmPassword"
        #confirmPassword="ngModel"
        [(ngModel)]="createAccountDto.confirmPassword"
        [ngClass]="confirmPassword.errors && confirmPassword.touched && confirmPassword.dirty ? 'border-warning' : 'border-grey'"
        required
        minlength="8"
        maxlength="128"
      >
      <div
        class="text-warning opacity-75 px-2 mt-1 text-sm"
        [@errorAnimation]="confirmPassword.touched && confirmPassword.dirty ? 'visible' : 'hidden'"
      >

        <div
          [@errorAnimation]="confirmPassword && confirmPassword.value !== password.value ? 'visible' : 'hidden'"
        >
          <span>Passwords should be the same</span>
        </div>

      </div>
    </div>

    <div class="text-center">

      <button
        class="px-20 py-3 bg-cta text-white font-bold mt-4 rounded-lg disabled:opacity-60"
        type="submit"
        [disabled]="form.invalid || awaitSubmit"
      >
        Register
      </button>

      <div
        class="mt-4 text-grey text-sm"
      >
        Already have an account?
        <a [routerLink]="['/login']" class="text-cta">Log in</a>
      </div>

    </div>

  </form>

</div>
